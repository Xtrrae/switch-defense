[gd_scene format=3 uid="uid://p5k3gs34bif6"]

[ext_resource type="Script" path="res://scripts/game.gd" id="1_iywne"]
[ext_resource type="PackedScene" uid="uid://2gcdsvi1m8id" path="res://scenes/input.tscn" id="1_lnu2h"]
[ext_resource type="Script" uid="uid://qbk2w6ii4lvg" path="res://scripts/spawner.gd" id="1_uwrxv"]
[ext_resource type="PackedScene" uid="uid://ckut456q8gpwj" path="res://scenes/points.tscn" id="2_yqjtg"]
[ext_resource type="Script" uid="uid://tfb6dgm54yt" path="res://scenes/health.gd" id="3_iywne"]
[ext_resource type="Texture2D" uid="uid://j65ycpfdjk0a" path="res://assets/hearts-spritesheet.png" id="4_lbhrr"]
[ext_resource type="FontFile" uid="uid://jtshwua3f1gx" path="res://assets/fonts/PixelifySans-VariableFont_wght.ttf" id="5_p57ef"]

[sub_resource type="Gradient" id="Gradient_lnu2h"]
colors = PackedColorArray(1, 0.5294118, 0.1254902, 1, 0.7137255, 0.29803923, 0.09019608, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_lbhrr"]
noise_type = 5
frequency = 0.002
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_iywne"]
noise = SubResource("FastNoiseLite_lbhrr")
color_ramp = SubResource("Gradient_lnu2h")

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_lnu2h"]
polygon = PackedVector2Array(-120, -60, 121, -60, 121, 61, -120, 62)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_lnu2h"]
vertices = PackedVector2Array(1722.2188, -674.59375, 1768.7188, 1259.9766, -1049.4375, 994.9375, -940.6094, -841.3906)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-950, -852, 1732, -684, 1779, 1271, -1060, 1004)])

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_lbhrr"]
bg_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_iywne"]
bg_color = Color(0.8671586, 0, 0.19845164, 1)

[sub_resource type="AtlasTexture" id="AtlasTexture_iywne"]
atlas = ExtResource("4_lbhrr")
region = Rect2(16, 32, 80, 64)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_u5sy4"]
bg_color = Color(0.643454, 0.19378492, 0, 1)
corner_radius_top_left = 2
corner_radius_top_right = 2
corner_radius_bottom_right = 2
corner_radius_bottom_left = 2

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_gee14"]
bg_color = Color(0.9588012, 0.48543525, 1.1551381e-06, 1)
corner_radius_top_left = 2
corner_radius_top_right = 2
corner_radius_bottom_right = 2
corner_radius_bottom_left = 2

[node name="Node2D" type="Node2D" unique_id=1330494218]
script = ExtResource("1_iywne")

[node name="Sprite2D" type="Sprite2D" parent="." unique_id=2139711286]
position = Vector2(465.50006, 239.99994)
scale = Vector2(4.164722, 3.124)
texture = SubResource("NoiseTexture2D_iywne")

[node name="Input" parent="." unique_id=331839216 instance=ExtResource("1_lnu2h")]
texture_filter = 1
position = Vector2(576, 324)

[node name="LightOccluder2D" type="LightOccluder2D" parent="Input" unique_id=673537078]
self_modulate = Color(1, 1, 1, 0)
occluder = SubResource("OccluderPolygon2D_lnu2h")

[node name="Spawner" type="Node2D" parent="." unique_id=1149451670]
script = ExtResource("1_uwrxv")

[node name="Timer" type="Timer" parent="Spawner" unique_id=604119849]
autostart = true

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="." unique_id=140841292]
position = Vector2(-4, -19)
navigation_polygon = SubResource("NavigationPolygon_lnu2h")

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="." unique_id=1058513653]
rotation = 0.6970903
color = Color(0.096204735, 0.09620475, 0.09620472, 1)
energy = 0.3
shadow_enabled = true
shadow_color = Color(0, 0, 0, 0.4862745)

[node name="CanvasLayer" type="CanvasLayer" parent="." unique_id=911453835]

[node name="HealthProgressBar" type="ProgressBar" parent="CanvasLayer" unique_id=742211854]
z_index = -1
offset_left = 493.0
offset_top = 244.0
offset_right = 693.0
offset_bottom = 258.0
theme_override_styles/background = SubResource("StyleBoxFlat_lbhrr")
theme_override_styles/fill = SubResource("StyleBoxFlat_iywne")
value = 100.0
show_percentage = false
script = ExtResource("3_iywne")

[node name="HealthTextureRect" type="TextureRect" parent="CanvasLayer/HealthProgressBar" unique_id=1110391649]
z_index = -1
layout_mode = 0
offset_left = -36.99997
offset_top = -6.9999847
offset_right = 43.000015
offset_bottom = 57.0
scale = Vector2(0.4, 0.4)
texture = SubResource("AtlasTexture_iywne")
expand_mode = 3

[node name="Points" parent="CanvasLayer" unique_id=2083446943 instance=ExtResource("2_yqjtg")]

[node name="TimerLabel" type="Label" parent="CanvasLayer" unique_id=221973973]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -208.5
offset_right = 208.5
offset_bottom = 46.0
grow_horizontal = 2
theme_override_fonts/font = ExtResource("5_p57ef")
theme_override_font_sizes/font_size = 37
text = "00:00"
horizontal_alignment = 1

[node name="ComboTimer" type="Timer" parent="." unique_id=1768611877]
one_shot = true

[node name="ComboBar" type="ProgressBar" parent="." unique_id=873069773]
offset_top = 98.0
offset_right = 149.0
offset_bottom = 125.0
theme_override_styles/background = SubResource("StyleBoxFlat_u5sy4")
theme_override_styles/fill = SubResource("StyleBoxFlat_gee14")
show_percentage = false

[node name="ComboLabel" type="Label" parent="ComboBar" unique_id=913252655]
visible = false
layout_mode = 0
offset_left = 98.0
offset_top = 17.0
offset_right = 170.0
offset_bottom = 46.0
rotation = -0.38109738
theme_override_colors/font_color = Color(1, 1, 0, 1)
theme_override_fonts/font = ExtResource("5_p57ef")
theme_override_font_sizes/font_size = 23
text = "COMBO"

[connection signal="combination_changed" from="Input" to="Spawner" method="_on_input_combination_changed"]
[connection signal="timeout" from="Spawner/Timer" to="Spawner" method="_on_timer_timeout"]
[connection signal="timeout" from="ComboTimer" to="." method="_on_combo_timer_timeout"]
